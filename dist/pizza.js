!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).pizza=e()}(this,function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var f=function(){return(f=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,c=i.length;s<c;s++,r++)o[r]=i[s];return o}var d,t,m={};(t=d||(d={}))[t.ADD=0]="ADD",t[t.DEL=1]="DEL",t[t.UPDATE=2]="UPDATE",t[t.BATCH=3]="BATCH",t[t.NONE=4]="NONE";var s={proxy:function(o,t,e,r){this.keys(t).forEach(function(n){Object.defineProperty(o,n,f({get:function(){return e.call(o,n)}},r?{set:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.call.apply(r,i([o,n],t))}}:{}))})},debounce:function(n,o){var r;return function(){var t=this,e=arguments;r&&clearTimeout(r),r=setTimeout(function(){return n.apply(t,e)},o)}},obj2str:function(e){return"{"+Object.keys(e).map(function(t){return'"'+t+'": '+e[t]}).join(",")+"}"},each:function(t,e){if(void 0===t&&(t=[]),"length"in t)[].forEach.call(t,e);else for(var n in t)e.call(t,t[n],n)},keys:function(t){return void 0===t&&(t={}),Object.keys(t)},camel2ul:function(t){return t.replace(/[A-Z]/,function(t,e){return(0==e?"":"-")+t.toLowerCase()})},camelKeys2ul:function(t){void 0===t&&(t={});var e={};for(var n in t)e[this.camel2ul(n)]=t[n];return e},same:function(t,e){for(var n in void 0===e&&(e={}),t)if(t[n]!==e[n])return!1;return!0}},e={createElement:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.updateElement.apply(this,i([document.createElement(t)],e))},updateElement:function(n,t,e){var o=this;return t&&s.each(t,function(t,e){return"value"==e?n.value=t:o.setAttr(n,e,t)}),e&&s.each(e,function(t,e){return o.on(n,e,t)}),n},setAttr:function(t,e,n){t.setAttribute(e,n)},on:function(e,n,t){var o=e.$$listeners||{};o[n]=t,e.addEventListener(n,function(t){o[n]&&o[n].call(e,t)},!1),e.$$listeners=o},off:function(t,e){var n=t.$$listeners||{};delete n[e],t.$$listeners=n},fragment:function(){return document.createDocumentFragment()},createText:function(t){return document.createTextNode(t)},createComment:function(t){return void 0===t&&(t=""),document.createComment(t)},insert:function(t,e,n){var o=t.childNodes;return 0==o.length||o.length<n?t.appendChild(e):t.insertBefore(e,o[n])},remove:function(t){t&&t.remove()}},v={util:s,dom:e},c=function(){function o(t){this.now={children:[]},this.html=t,this.stack=[this.now]}return o.prototype.analyse=function(){if(!this.html)return null;for(var t;t=o.REGEXP.exec(this.html);)if(!this.collect.apply(this,t.slice(1)))throw new Error("template parsing error, not a valid structure ~\r\n["+t.index+"]: "+t[0]+"\r\n"+this.html);return this.now},o.prototype.collect=function(t,e,n,o,r,i){do{if(e){var s={node:e.toLocaleLowerCase(),props:this.collectAttrs(n),children:[]};!o&&this.stack.push(s),this.now.children.push(s)}else if(r){if(r.toLocaleLowerCase()!=this.now.node)break;this.stack.pop()}else t?this.now.children.push({isComment:!0,text:t||" "}):i.trim()&&this.now.children.push({text:i});return this.now=this.stack[this.stack.length-1],!0}while(0);return!1},o.prototype.collectAttrs=function(t){var e={};if(t)for(var n=void 0;n=o.ATTR_REPEXP.exec(t);)e[n[1].toLocaleLowerCase()]=n[2];return e},o.REGEXP=/<!--((?:(?!-->)[\s\S])*?)-->|<([a-z]+(?:(?:-[a-z]+)+)?)([^<>]+?)?(\s*\/)?>|<\/([a-z]+(?:(?:-[a-z]+)+)?)>|([\s\S]+?)(?=<|$)/gi,o.ATTR_REPEXP=/\s*(\S+?)="([^"]+)"/g,o}(),o=/[a-z][a-z0-9]*(-[a-z]+)+/,u={};function l(t,e){if(!e)return u[t];if(!o.test(t))throw new Error("Component["+t+"] is not valid, please register a correct component such as [xx-xx]");var n=u[t]=e;n.template&&(n.render=k(n.template,n))}var h=["v-if","v-else-if","v-else","v-for","v-for-index","v-for-item","v-key"],$=/^(?:v-on:|@)/,y=/^(?:v-bind)?:/,n={start:/{{/g,end:/}}/g};function a(t,e){return{isCopy:!0,children:[].map.call(t,e).filter(function(t){return t!==m})}}function p(t,e,n){var o=this.$components[t]||l(t);return o&&!o.render&&(o.render=k(o.template,o)),f(f({node:t},e),{children:n,componentOptions:o})}function E(t){return{text:t}}function _(t){return{isComment:!0,text:t}}function g(t){var e,n=function(t){var e={},n={},o={};for(var r in t.props){var i=t.props[r];-1<h.indexOf(r)?e[r]=i:$.test(r)?n[r.replace($,"")]=i:y.test(r)?o[r.replace(y,"")]=i:o[r]=JSON.stringify(i)}return{logics:e,events:n,props:o}}(t),o=n.logics,r=n.events,i=n.props,s=o["v-for"],c=o["v-if"],u=o["v-else-if"],l=o["v-else"],a=o["v-for-index"]||"$index",p=o["v-for-item"]||"$item";return e='_$n("'+t.node+'", {\n      '+(s&&o["v-key"]?"key: "+o["v-key"]+",":"")+"\n      props: "+v.util.obj2str(i)+",\n      events: "+v.util.obj2str(r)+",\n    }, ["+t.children.map(function(t,e){return x(t)})+"])",c?e=c+" ? "+e+" : _$e":u?e=" && "+u+" ? "+e+" : _$e":l&&(e=" && "+e),s&&(e="_$l("+s+", function("+p+", "+a+") { return "+e+"; })"),e}function x(t){var e;return t.node?e=g(t):t.isComment?e="_$m("+JSON.stringify(t.text)+")":t.text&&(e='_$t("'+t.text.replace(/[\s]+/g," ").replace(n.start,'" + (').replace(n.end,') + "')+'")'),e}function k(t,n){if(n.render)return n.render;var e=new c(t),o=e.analyse();if(e=null,!o||0==o.children.length)throw new Error("instance must be a root element!");if(1<o.children.length)throw new Error("template's root must be only one !\r\n "+t);var r=["props","data","methods"].reduce(function(t,e){return t.concat(v.util.keys(n[e]))},[]).map(function(t){return t+" = this."+t}).join(", ");return n.render=new Function("_$l","_$n","_$t","_$m","_$e","_$cs","\n    return function() {\n      "+(""!=r?"var "+r+";":"")+";\n      _$n = _$n.bind(this);\n      return "+x(o.children[0])+";\n    };\n  ")(a,p,E,_,m),n.render}function w(n,t){void 0===t&&(t={}),v.util.each(t,function(t,e){n.$on("props:"+e,t)})}function D(t){return!!t&&(t.componentInstance&&t.componentInstance.$destroy(),v.dom.remove(t.el),t.el=null,t)}function A(s,t){var e,n,o,c=0,u=(e=t.children||[],n=e[0],o={},n&&null!=n.key?(e.forEach(function(t){o[t.key]=t}),o):e);v.util.each(s.children,function(t,e){var n,o,r,i=(n=u,o=t.key||e,r=n[o],delete n[o],r);switch(b(t,i).type){case d.DEL:return void D(i);case d.ADD:v.dom.insert(s.el,t.el,c);break;case d.BATCH:return v.dom.insert(s.el,t.el,c),void(c+=t.el.childNodes.length)}c++}),v.util.each(u,D)}function b(t,e){var n,o,r,i,s,c,u,l,a,p,h;void 0===e&&(e={});do{if(t.componentOptions)l=t,h=p=void 0,h=(a=e).componentInstance,p=h?v.util.same(l.props,a.props)?(l.el=a.el,d.NONE):(l.el=a.el,h.$propsData=l.props,h.$off("props:"),w(h,l.events),h.$update(),d.UPDATE):(l.el=v.dom.createElement("section"),v.dom.setAttr(l.el,"component-name",l.node),l.el.$root=l.el.attachShadow({mode:"closed"}),w(h=new O(f(f({},l.componentOptions),{propsData:l.props})),l.events),h.$mount(l.el.$root),d.ADD),l.componentInstance=h,n={type:p,vnode:l};else if(t.node)c=t,n={type:(u=e).el?v.util.same(c.props,u.props)?(c.el=u.el,d.NONE):(c.el=v.dom.updateElement(u.el,c.props,c.events),d.UPDATE):(c.el=v.dom.createElement(c.node,c.props,c.events),d.ADD),vnode:c};else{if(t.isComment){i=t,n={type:(s=e).el?(i.el=s.el,d.NONE):(i.el=v.dom.createComment(i.text),d.ADD),vnode:i};break}if(t.text){o=t,n={type:(r=e).el?(o.el=r.el,o.text!=r.text&&(o.el.textContent=o.text),d.UPDATE):(o.el=v.dom.createText(o.text),d.ADD),vnode:o};break}if(t.isCopy)t.el=v.dom.fragment(),n={vnode:t,type:d.BATCH};else{if(t==m){n={vnode:e,type:d.DEL};break}n={vnode:t,type:d.NONE}}}A(t,e)}while(0);return n}var O=function(o){function t(t){var e=o.call(this)||this;return e.$mounted=!1,e.$destroyed=!1,e._nextFns=[],e.$update=v.util.debounce(function(){if(!this.$mounted||this.$destroyed)return!1;this._render(),this.$emit("hook:updated")},10),e.$options=t||{},e.$propsData=t.propsData||{},e.$data=t.data||{},e.$methods=t.methods||{},e.$components=v.util.camelKeys2ul(t.components),e._init(),e}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(t,o),t.prototype._init=function(){this._injectHooks(),v.util.proxy(this,this.$options.props,this.$get),v.util.proxy(this,this.$methods,this.$get),v.util.proxy(this,this.$data,this.$get,this.$set),this._vnodeFn=this.$options.render?this.$options.render:k(this.$options.template,this.$options),this.$emit("hook:created")},t.prototype.$set=function(t,e){t in this.$data&&e!==this.$data[t]&&(this.$data[t]=e,this.$update())},t.prototype.$get=function(n,t){var e,o,r=this;return this.$methods[n]?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.$invoke.apply(r,i([n],t))}:null!==(o=null!==(e=this.$propsData[n])&&void 0!==e?e:this.$data[n])&&void 0!==o?o:t},t.prototype._injectHooks=function(){var n=this;v.util.each(this.$options.lifecyles,function(t,e){return n.$on("hook:"+e,t)})},t.prototype.$emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];o.prototype.$emit.apply(this,i([t],e)),o.prototype.$emit.apply(this,i(["props:"+t],e))},t.prototype.$invoke=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return(e=this.$methods[t]).call.apply(e,i([this],n))},t.prototype.$nextTick=function(t){this._nextFns.push(t)},t.prototype._render=function(){var t,e,n=this,o=this._vnodeFn();this._mountElement&&(o={el:this._mountElement,children:[o]}),this._vnode=(t=o,void 0===(e=this._vnode)&&(e={}),b(t,e).vnode),this._nextFns.forEach(function(t){return t.call(n)}),this._nextFns.length=0},t.prototype.$mount=function(t){if(this.$mounted)return!1;t&&(t.innerHTML="",this._mountElement=t),this._render(),this.$el=this._vnode.el,this.$mounted=!0,this.$emit("hook:mounted"),console.log(this)},t.prototype.$destroy=function(){this.$destroyed=!0,this.$emit("hook:destroyed")},t.register=l,t}(function(){function t(){this.$events={}}return t.prototype.$on=function(t,e){var n,o=null!==(n=this.$events[t])&&void 0!==n?n:[];o.push(e),this.$events[t]=o},t.prototype.$emit=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(this.$events[t]||[]).forEach(function(t){return t.apply(e,n)})},t.prototype.$off=function(n){var o=this;/:$/.test(n)?v.util.each(this.$events,function(t,e){0==e.indexOf(n)&&delete o.$events[e]}):delete this.$events[n]},t}());return O});
